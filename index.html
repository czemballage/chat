<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PixelSketch Animate</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- Splash Screen -->
    <div id="splashScreen" class="screen active">
        <div class="logo">
            <span>P</span><span>i</span><span>x</span><span>e</span><span>l</span><span>S</span><span>k</span><span>e</span><span>t</span><span>c</span><span>h</span>
            <span>A</span><span>n</span><span>i</span><span>m</span><span>a</span><span>t</span><span>e</span>
        </div>
    </div>

    <!-- Home Screen -->
    <div id="homeScreen" class="screen">
        <header class="top-bar">
            <h1>My Projects</h1>
            <button id="settings-btn">Settings</button>
        </header>
        <main id="projectList">
            <!-- Project items will be injected here -->
        </main>
        <footer>
            <button id="newProjectBtn">+ New Project</button>
        </footer>
    </div>

    <!-- New Project Screen -->
    <div id="newProjectScreen" class="screen">
        <header>
            <h1>New Project</h1>
        </header>
        <main>
            <form id="newProjectForm">
                <label for="projectName">Project Name</label>
                <input type="text" id="projectName" value="My Animation">

                <label for="canvasSize">Canvas Size</label>
                <select id="canvasSize">
                    <option value="16x16">16x16</option>
                    <option value="32x32" selected>32x32</option>
                    <option value="64x64">64x64</option>
                    <option value="128x128">128x128</option>
                    <option value="custom">Custom</option>
                </select>
                <div id="customCanvasSize" style="display: none;">
                    <input type="number" id="canvasWidth" placeholder="Width">
                    <input type="number" id="canvasHeight" placeholder="Height">
                </div>

                <label for="fps">FPS (Frames Per Second)</label>
                <input type="range" id="fps" min="1" max="30" value="12">
                <span id="fpsValue">12</span>

                <button type="submit">Start Project</button>
                <button type="button" id="cancelNewProjectBtn">Cancel</button>
            </form>
        </main>
    </div>

    <!-- Drawing Screen -->
    <div id="drawingScreen" class="screen">
        <header class="top-bar">
            <span id="currentProjectName"></span>
            <span id="saveIndicator"></span>
            <div>
                <button id="preview-btn">Preview</button>
                <button id="export-btn">Export</button>
            </div>
        </header>
        <div class="main-content">
            <aside class="tool-sidebar-left">
                <button id="pencil-tool" class="tool-button active" title="Pencil">P</button>
                <button id="eraser-tool" class="tool-button" title="Eraser">E</button>
                <button id="fill-tool" class="tool-button" title="Fill">F</button>
                <button id="color-picker-tool" class="tool-button" title="Color Picker">CP</button>
                <hr>
                <button id="undo-btn" title="Undo">U</button>
                <button id="redo-btn" title="Redo">R</button>
                <hr>
                <button id="onion-skin-btn" title="Toggle Onion Skin">OS</button>
            </aside>
            <main class="canvas-container">
                <canvas id="pixelCanvas"></canvas>
            </main>
        </div>
        <div id="color-palette-container">
            <!-- color swatches will be here -->
        </div>
        <footer class="bottom-bar">
            <div class="timeline-controls">
                <button id="play-animation-btn">Play</button>
                <button id="add-frame-btn">+ Frame</button>
                <button id="remove-frame-btn">- Frame</button>
                <button id="duplicate-frame-btn">Copy Frame</button>
            </div>
            <div class="timeline-container">
                <div id="timelineFrames">
                    <!-- Frame thumbnails will be injected here -->
                </div>
            </div>
        </footer>
    </div>

    <!-- Export Screen -->
    <div id="exportScreen" class="screen">
        <header>
            <h1>Export Project</h1>
        </header>
        <main>
            <form id="exportForm">
                <label for="exportFormat">Format</label>
                <select id="exportFormat">
                    <option value="gif">GIF</option>
                    <option value="png-zip">PNG Sequence (ZIP)</option>
                    <option value="mp4" disabled>MP4 (Coming Soon)</option>
                </select>

                <label for="exportScale">Scale</label>
                <select id="exportScale">
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="4" selected>4x</option>
                    <option value="8">8x</option>
                </select>

                <div class="gif-options">
                    <label><input type="checkbox" id="gifLoop"> Loop</label>
                    <label><input type="checkbox" id="gifTransparent"> Transparent BG</label>
                </div>

                <button type="submit">Export</button>
                <button type="button" id="cancelExportBtn">Cancel</button>
                <p id="exportStatus"></p>
            </form>
        </main>
    </div>

    <!-- Settings Screen -->
    <div id="settingsScreen" class="screen">
        <header>
            <h1>Settings</h1>
        </header>
        <main>
            <form id="settingsForm">
                <div class="setting-item">
                    <label for="onionSkinOpacity">Onion Skin Opacity</label>
                    <input type="range" id="onionSkinOpacity" min="0.1" max="0.7" step="0.05">
                    <span id="onionSkinOpacityValue"></span>
                </div>
                <div class="setting-item">
                    <label for="gridLinesToggle">Grid Lines</label>
                    <input type="checkbox" id="gridLinesToggle" checked>
                </div>
                <div class="setting-item">
                    <label for="autosaveToggle">Auto-save</label>
                    <input type="checkbox" id="autosaveToggle" checked>
                </div>

                <hr>

                <h3>Defaults for New Projects</h3>
                <div class="setting-item">
                    <label for="defaultFps">Default FPS</label>
                    <input type="range" id="defaultFps" min="1" max="30" value="12">
                    <span id="defaultFpsValue">12</span>
                </div>

                <hr>

                <button type="button" id="resetSettingsBtn">Reset to Defaults</button>
                <button type="button" id="closeSettingsBtn">Close</button>
            </form>
        </main>
    </div>

    <!-- Preview Screen -->
    <div id="previewScreen" class="screen">
        <header>
            <h1>Preview</h1>
            <button id="closePreviewBtn">Close</button>
        </header>
        <main class="preview-container">
            <canvas id="previewCanvas"></canvas>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>

    <script src="js/export.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/storage.js"></script>
</body>
</html>
